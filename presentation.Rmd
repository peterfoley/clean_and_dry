---
title: "Staying clean and DRY"
subtitle: "best practices for code reuse and collaboration"
author: "Peter Foley"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  xaringan::moon_reader:
    seal: true
    nature:
      highlightStyle: github
      highlightLines: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


---
About me

---
What are we doing and why bother

Options for organizing code cleanly

Tips for each option

When to use each option

---
## Glossary

- Side Effects
- Clean Code
- Don't repeat yourself

---
## Glossary - Side Effects

> change something that you weren't passed and don't return

```{r eval=FALSE}
coffee_pot <- make_a_pot(cups=12)
```

You can do these things without side effects:
```{r eval=FALSE}
temp <- measure_temperature(coffee_pot)
filled_cup <- fill(from = coffee_pot, to = cup)
```

This has a side effect!:
```{r eval=FALSE}
*pour_on_floor(from = coffee_pot)
```

---
## Glossary - Don't Repeat Yourself


---
## Glossary - Clean Code




---
## Why bother?

- If any of these apply to you:
  - You can't remember everything perfectly forever
  - Other people don't know what you know
  - You sometimes make mistakes and want to fix them

> Reading code is harder than writing it

---
# Options for organizing code

- standalone scripts
- utility scripts (`source("utils.R")`)
- utility package (`devtools::load_all("utils_pkg")`)
- standalone package (`library(package)`)

---
## Standalone Scripts




---
## Utility scripts


---
## Utility package


---
## Standalone package



---
## Tips

Always helpful:
  - `usethis::use_git`
  - separate "define how to do X" from "do X"

Utility scripts:
  - no side effects
  - don't source other utility scripts -- keep it flat

Internal packages:
  - function documentation will show up in rstudio as tooltips
  - README.md can be helpful 

Standalone packages:
  - `usethis::use_testthat()`
  - `usethis::use_travis()`
  - 

